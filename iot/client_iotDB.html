<html>
<head>
	<meta charset="utf-8">
	<!-- Plotly.js -->
	<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
	<h1>Data visualization by AA08</h1>
	<hr>
	<h2>Time series by AA08</h2>

	<!-- Plotly chart will be drawn inside this DIV -->
	<div id="myDiv" style="width: 700px;height: 500px"></div>
	
	<script>
		<!-- JAVASCRIPT CODE GOES HERE -->

		Plotly.d3.csv("data/AA08_iot99.csv", function(err, rows){

			function unpack(rows, key) {
				return rows.map(function(row) { return row[key]; });
			}


				var trace1 = {
				type: "scatter",
				mode: "lines",
				name: 'Temperature',
				x: unpack(rows, 'date'),
				y: unpack(rows, 'temperature'),
				line: {color: '#fc1234'}
			}
			
			var trace2 = {
				type: "scatter",
				mode: "lines",
				name: 'Humidity',
				x: unpack(rows, 'date'),
				y: unpack(rows, 'humidity'),
				line: {color: '#3412fc'}
			}
				var trace3 = {
				type: "scatter",
				mode: "lines",
				name: 'Luminosity',
				x: unpack(rows, 'date'),
				y: unpack(rows, 'luminosity'),
				line: {color: '#34fc12'}
			}

			var data = [trace1,trace2,trace3];

			var layout = {
				title: 'iot Tiome Series with rangeslider',
				xaxis: {
					autorange: true,
					range: [["2019-12-11  14:17:30","2019-12-11  14:21:10 "]],
					rangeselector: {buttons: [
						{
							count: 10,
							label: '10s second',
							step: 'second',
							stepmode: 'backward'
						},
						{
							count: 15,
							label: '15 second',
							step: 'second',
							stepmode: 'backward'
						},
						{
							count: 30,
							label: '30 second',
							step: 'second',
							stepmode: 'backward'
						},
						{
							count: 1,
							label: '1 minute',
							step: 'minute',
							stepmode: 'backward'
						},
						{step: 'all'}
						]},//[36:35.2,55:29.2]
						rangeslider: {range: ["2019-12-11  14:17:30","2019-12-11  14:21:10 "]},
						type: 'all'
					},
					yaxis: {
						autorange: true,
						range: [0, 80],
						type: 'linear'
					}
				};


				Plotly.newPlot('myDiv', data, layout);
			})		

		</script>

	</body>
</html>	

